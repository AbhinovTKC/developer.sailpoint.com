type : object
title: Campaign
allOf:
  - $ref: 'SlimCampaign.yaml'
  - type: object
    properties:
      created:
        type: string
        readOnly: true
        format: date-time
      modified:
        type: string
        readOnly: true
        format: date-time
      filter:
        type: object
        description: >-
          Determines which items will be included in this campaign. The default campaign filter is used if this
          field is left blank.
        properties:
          id:
            type: string
            description: The ID of whatever type of filter is being used.
          type:
            type: string
            enum:
              - CAMPAIGN_FILTER
      sunsetCommentsRequired:
        type: boolean
        description: >-
          Determines if comments on sunset date changes are required.
        default: true
      sourceOwnerCampaignInfo:
        type: object
        description: Must be set only if the campaign type is SOURCE_OWNER.
        properties:
          sourceIds:
            type: array
            description: The list of sources to be included in the campaign.
            items:
              type: string
      searchCampaignInfo:
        type: object
        description: Must be set only if the campaign type is SEARCH.
        properties:
          type:
            type: string
            description: The type of search campaign represented.
            enum:
              - IDENTITY
              - ACCESS
          description:
            type: string
            description: >-
              Describes this search campaign. Intended for storing the query used, and possibly the number of identities
              selected/available.
          reviewer:
            description: >-
              If specified, this identity or governance group will be the reviewer for all certifications in
              this campaign. The allowed DTO types are IDENTITY and GOVERNANCE_GROUP
            allOf:
              - $ref: '../../v3/schemas/BaseReferenceDto.yaml'
              - type: object
          query:
            type: string
            description: >-
              The scope for the campaign. The campaign will cover identities returned by the query and identities that
              have access items returned by the query. One of `query` or `identityIds` must be set.
          identityIds:
            type: array
            description: A direct list of identities to include in this campaign. One of `identityIds` or `query` must be set.
            items:
              type: string
            maxItems: 1000
          accessConstraints:
            type: array
            description: >-
              Further reduces the scope of the campaign by excluding identities (from `query` or `identityIds`) that do
              not have this access.
            items:
              $ref: './AccessConstraint.yaml'
            maxItems: 1000
        required:
          - type
      roleCompositionCampaignInfo:
        type: object
        description: Optional configuration options for role composition campaigns.
        properties:
          reviewer:
            description: >-
              If specified, this identity or governance group will be the reviewer for all certifications in
              this campaign. The allowed DTO types are IDENTITY and GOVERNANCE_GROUP
            allOf:
              - $ref: '../../v3/schemas/BaseReferenceDto.yaml'
              - type: object
          roleIds:
            type: array
            description: >-
              Optional list of roles to include in this campaign. Only one of `roleIds` and `query` may be set; if
              neither are set, all roles are included.
            items:
              type: string
          remediatorRef:
            type: object
            description: >-
              This determines who remediation tasks will be assigned to. Remediation tasks are created for each
              revoke decision on items in the campaign. The only legal remediator type is 'IDENTITY', and the
              chosen identity must be a Role Admin or Org Admin.
            properties:
              type:
                type: string
                enum:
                  - IDENTITY
              id:
                type: string
                description: The ID of the remediator.
              name:
                type: string
                description: The name of the remediator.
                readOnly: true
            required:
              - type
              - id
          query:
            type: string
            description: >-
              Optional search query to scope this campaign to a set of roles. Only one of `roleIds` and `query` may
              be set; if neither are set, all roles are included.
          description:
            type: string
            description: >-
              Describes this role composition campaign. Intended for storing the query used, and possibly the number
              of roles selected/available.
        required:
          - remediatorRef
      alerts:
        type: array
        description: A list of errors and warnings that have accumulated.
        readOnly: true
        items:
          $ref: './CampaignAlert.yaml'
      totalCertifications:
        type: integer
        description: The total number of certifications in this campaign.
        readOnly: true
      completedCertifications:
        type: integer
        description: The number of completed certifications in this campaign.
        readOnly: true
      sourcesWithOrphanEntitlements:
        type: array
        description: >-
          A list of sources in the campaign that contain \"orphan entitlements\" (entitlements without a corresponding
          Managed Attribute). An empty list indicates the campaign has no orphan entitlements. Null indicates there may
          be unknown orphan entitlements in the campaign (the campaign was created before this feature was implemented).
        readOnly: true
        items:
          type: object
          properties:
            id:
              type: string
            type:
              type: string
              enum:
                - SOURCE
            name:
              type: string
example:
  id: 2c9079b270a266a60170a2779fcb0007
  name: Manager Campaign
  description: Everyone needs to be reviewed by their manager.
  created: '2020-03-03T22:15:13.611Z'
  modified: '2020-03-03T22:20:12.674Z'
  deadline: '2020-03-15T00:00:00.456Z'
  type: MANAGER
  emailNotificationEnabled: true
  autoRevokeAllowed: false
  recommendationsEnabled: false
  status: ACTIVE
  filter:
    type: CAMPAIGN_FILTER
    id: e0adaae69852e8fe8b8a3d48e5ce757c
